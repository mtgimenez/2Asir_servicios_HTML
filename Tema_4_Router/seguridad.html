

<!DOCTYPE html>


<html lang="es" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>5.3. Seguridad. Proxy-Caché &#8212; ASIR - Servicios de Red e Internet</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/my_theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=365ca57ee442770a23c6"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../_static/translations.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Tema_4_Router/seguridad';</script>
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="next" title="6. Servicio WEB. HTTP(S)" href="../Tema_5_Web/Index.html" />
    <link rel="prev" title="5.2. Apertura de puertos" href="puertos.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="es"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Saltar al contenido principal</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">ASIR - Servicios de Red e Internet</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Contenidos</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../PRESENTACION/Index.html">1. Presentación Módulo</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../PRESENTACION/presentacion.html">1.1. Calendario del curso</a></li>




</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../TEMA_1_Introduccion/Index.html">2. Introducción a los Servicios de Red</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../TEMA_1_Introduccion/conceptos.html">2.1. Conceptos previos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TEMA_1_Introduccion/componentes.html">2.2. Componentes de los Srv. de Red</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TEMA_1_Introduccion/virtualizacion.html">2.3. Virtualización</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TEMA_1_Introduccion/escenario.html">2.4. Entorno de trabajo</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../TEMA_2_Dhcp/Index.html">3. Protocolo de Configuración Dinámico. DHCP</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../TEMA_2_Dhcp/funcionamiento.html">3.1. Funcionamiento del protocolo</a></li>

<li class="toctree-l2"><a class="reference internal" href="../TEMA_2_Dhcp/configuracion.html">3.3. Configuración del servicio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TEMA_2_Dhcp/comprobacion.html">3.4. Comprobando el funcionamiento</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TEMA_2_Dhcp/adicionales.html">3.5. Configuraciones adicionales</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Tema_3_DNS/Index.html">4. Resolución de nombres. DNS</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Tema_3_DNS/espacio.html">4.1. El Espacio de Nombres de Dominio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Tema_3_DNS/tipos.html">4.2. Tipos de servidores, resoluciones y búsquedas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Tema_3_DNS/ficherozona.html">4.3. Fichero de zona DNS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Tema_3_DNS/configuracion.html">4.4. Configuración del servicio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Tema_3_DNS/comprobaciones.html">4.5. Comprobando el funcionamiento</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="Index.html">5. Interconexión de Redes</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="acceso.html">5.1. Acceso redes remotas</a></li>
<li class="toctree-l2"><a class="reference internal" href="puertos.html">5.2. Apertura de puertos</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">5.3. Seguridad. Proxy-Caché</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Tema_5_Web/Index.html">6. Servicio WEB. HTTP(S)</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Tema_5_Web/componentes.html">6.1. Componentes del protocolo HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Tema_5_Web/clientes.html">6.2. Clientes HTTP. navegadores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Tema_5_Web/http.html">6.3. Configuración HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Tema_5_Web/https.html">6.4. Seguridad. HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Tema_5_Web/rendimiento.html">6.5. Rendimiento y optimización</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Tema_5_Web/disponibilidad.html">6.6. Alta disponibilidad</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Tema_6_Acceso/Index.html">7. Acceso</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Tema_6_Acceso/Accesofichero.html">7.1. Acceso a ficheros</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Tema_6_Acceso/Accesoremoto.html">7.2. Acceso remoto</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Tema_7_Email/Index.html">8. Correo Electrónico</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tema_8_Otros/Index.html">9. Otros Servicios</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Descarga esta pagina">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Tema_4_Router/seguridad.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Descargar archivo fuente"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Imprimir en PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Modo de pantalla completa"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="claro/oscuro" aria-label="claro/oscuro" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Búsqueda" aria-label="Búsqueda" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Seguridad. Proxy-Caché</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contenido </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#squid">5.3.1. Squid</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#proxy-transparente">5.3.2. Proxy transparente</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="seguridad-proxy-cache">
<h1><span class="section-number">5.3. </span>Seguridad. Proxy-Caché<a class="headerlink" href="#seguridad-proxy-cache" title="Permalink to this heading">#</a></h1>
<p>Un proxy es un programa o dispositivo que realiza una acción en representación de otro. Esta situación estratégica de punto intermedio suele ser aprovechada para soportar una serie de funcionalidades:</p>
<blockquote>
<div><ul class="simple">
<li><p>PROPORCIONAR CACHÉ.</p></li>
<li><dl class="simple">
<dt>CONTROL DE ACCESO</dt><dd><ul>
<li><p>Si lo que se gestiona es el acceso desde el exterior a los recursos internos de nuestra red estaríamos hablando de un <a class="reference external" href="https://es.wikipedia.org/wiki/Proxy_inverso">proxy inverso</a>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>REGISTRO DEL TRÁFICO</p></li>
<li><p>PROHIBIR CIERTO TIPO DE TRÁFICO.</p></li>
<li><p>REGULACION ANCHO DE BANDA</p></li>
</ul>
</div></blockquote>
<p>El uso mas común de este servicio se encuentra en Internet. Se trata de un <strong>proxy para el control del acceso a la web (principalmente los protocolos HTTP y HTTPS)</strong>, proporcionando una caché para las páginas web y los contenidos descargados. Cuando esto sucede se dice que el proxy web está haciendo un servicio de proxy-cache. Esta caché es compartida por todos los usuario del proxy, con la consiguiente mejora en los tiempos de acceso para consultas coincidentes. Al mismo tiempo libera la carga de los enlaces hacia Internet.</p>
<section id="squid">
<h2><span class="section-number">5.3.1. </span>Squid<a class="headerlink" href="#squid" title="Permalink to this heading">#</a></h2>
<p>Vamos a estudiar uno de los proxy más ampliamente utilizado en la actualidad, <strong>SQUID</strong>, encontramos la version para Windows y para Linux. Siendo más utilizado en servidores Linux-Unix, ya que originariamente es un SW de esta platarfoma. La configuración es exactamente igual en los dos Sistemas Operativos.</p>
<p>Ya teniendo instalado nuestro servidor squid, ahora deberemos saber en donde se encuentra toda la configuración del mismo(<strong>/etc/squid</strong>). Ya dentro de esta carpeta se encontraran varios archivos pero el mas importante es el <strong>squid.conf</strong> el cual se encarga de la configuración del servicio. En la configuración de squid hay que distinguir varios elementos:</p>
<blockquote>
<div><ol class="arabic simple">
<li><dl class="simple">
<dt>Configuración General: Parámetros generales de funcionamiento del servicio.</dt><dd><ul class="simple">
<li><p>IP/Puerto donde está trabajando el servicio.</p></li>
<li><p>Tamaño de la caché.</p></li>
<li><p>etc..</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><strong>ACL (Lista de control de acceso)</strong>: Definición de conjunto de elementos a los que se aplicarán reglas.</p></li>
<li><p><strong>REGLAS</strong>: Decisiones de autorización/denegación de acceso a ACL.</p></li>
</ol>
</div></blockquote>
<p>Los recursos que podéis encontrar en la web son muchos, por ejemplo el siguiente videotutorial:</p>
<iframe width="250" style="display:block; margin-left:auto; margin-right:auto;" src="https://www.youtube.com/embed/zXusMCM6p_k" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></br><dl class="simple">
<dt>O también podéis encontrar muchísimos recursos en la web:</dt><dd><ul class="simple">
<li><p><a class="reference external" href="https://wiki.squid-cache.org/SquidFaq/SquidAcl">Wiki completa de configuración de Squid</a>.</p></li>
<li><p><a class="reference external" href="https://elpuig.xeill.net/Members/vcarceler/smx-m07/actividades/squid-a3">Unos cuantos ejemplos sencillos para comenzar</a>.</p></li>
<li><p><a class="reference external" href="http://www.squid-cache.org/Doc/config/">Documentación oficial Squid</a>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition important">
<p class="admonition-title">Importante</p>
<ul class="simple">
<li><p>Puedes consultar los ficheros de registro del proxy en <em>/var/log/squid</em>.</p></li>
<li><p>Los clientes del proxy pueden configurarse de diferentes maneras.</p></li>
</ul>
</div>
<p>Para configurar los clientes que van a utilizar nuestro servicio de proxy tenemos varias opciones:</p>
<ol class="arabic">
<li><p><strong>Configuración de los navegadores</strong>: Firefox, tiene en sus configuraciones la configurar el servidor intermediario.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/conProxyNavegador.png"><img alt="Configuración proxy en Firefox" class="align-center" src="../_images/conProxyNavegador.png" style="width: 200px;" /></a>
</div></blockquote>
</li>
<li><p><strong>Proxy de sistema</strong>: Chrome u otros navegadores utilizan el proxy que se configura para todo el sistema.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/conProxySistema.png"><img alt="Configuración proxy en Windows 10" class="align-center" src="../_images/conProxySistema.png" style="width: 200px;" /></a>
</div></blockquote>
</li>
<li><p>Con un <strong>fichero de configuración automática del proxy(PAC)</strong>: Nos va a permitir automatizar algunos aspectos. Puedes ver más información en el <a class="reference external" href="https://www.watchguard.com/help/docs/help-center/es-419/Content/es-419/Fireware/proxies/explicit_proxy/explicit_proxy_pacfiles_c.html?TocPath=Controlar%20el%20Tr%C3%A1fico%20de%20Red%7CServidores%20Proxy%7CAcerca%20del%20Proxy%20Expl%C3%ADcito%7C_____4">siguiente enlace</a>.</p></li>
</ol>
<div style="text-align: justify; color: BLUE; background-color: #e0e0e0; border-radius: 25px; padding-top: 20px;padding-right: 30px;padding-bottom: 20px; padding-left: 30px;">
<u>¿Sabrías?</u></br>
¿Instalar el paquete Squid en una MV y realizar las configuraciones y pruebas pertinentes para comprobar su funcionamiento?¿Qué es lo que ocurre por defecto si no modificamos nada de la configuración inicial de Squid?
</div></br><p>La configuración de nuestro servicio proxy, consistirá en la combinación de los tres elementos vistos anteriormente. Es importante comprender varios aspectos:</p>
<ol class="arabic simple">
<li><p>Las <strong>reglas se aplican en orden</strong>. Una vez se puede aplicar una regla a un paquete, no se le aplican las siguientes (ojo con dejar un <strong>http_access allow all como regla final</strong>).</p></li>
<li><p>El uso de la <strong>negación (!)</strong> puede ayudarnos bastante en la creación de reglas, pero puede tener resultados no esperados si no la utilizamos correctamente.</p></li>
<li><p>El aplicar <strong>varias ACL a una misma regla</strong> no es lo mismo que aplicar la misma regla a cada ACL por separado.</p></li>
</ol>
<p style="text-align: justify;"><img src="https://upload.wikimedia.org/wikipedia/commons/6/68/Document_%2889367%29_-_The_Noun_Project.svg" alt="Perfil" width="50" style="vertical-align: middle; float:left;"/>
Puedes encontrar un <b>ejemplo reducido de un fichero de configuración de Squid (squid.conf) </b>, para poder trabajar con él<sup id="fnref:note1"><a class="footnote-ref" href="#fn:note1" role="doc-noteref">1</a></sup>, en el siguiente enlace:
</p><a class="reference internal image-reference" href="../_images/squid.conf"><img alt="Ejemplo fichero configuración" class="align-center" src="../_images/squid.conf" style="width: 400px;" /></a>
<p>Sería interesante que revisaras su contenido e intentaras comprender el funcionamiento que implica.</p>
<p>Como ejemplo más básico puedes probar a configurar lo siguiente.</p>
<ol class="arabic simple">
<li><p>Autorizar el acceso a los equipos de mi red local.</p></li>
<li><p>Únicamente en horario de Servicios de Red.</p></li>
<li><p>El acceso solo se autoriza a determinadas páginas web, contenidas en un fichero de texto.</p></li>
</ol>
<p>El resultado debería ser algo parecido a lo siguiente:</p>
<a class="reference internal image-reference" href="../_images/ejemploSimple.png"><img alt="Solución al ejemplo Squid" class="align-center" src="../_images/ejemploSimple.png" style="width: 500px;" /></a>
</section>
<section id="proxy-transparente">
<h2><span class="section-number">5.3.2. </span>Proxy transparente<a class="headerlink" href="#proxy-transparente" title="Permalink to this heading">#</a></h2>
<p>La principal desventaja del uso de proxy es la necesidad de configurar los navegadores ”a mano”,  con la consiguiente desventaja en cuanto a seguridad y escalabilidad. La solución a esta situación pasa por la utilización de un <strong>proxy transparente</strong>. Para ello debe existir una configuración física como la que muestra la imagen.</p>
<a class="reference internal image-reference" href="../_images/proxytransparente.png"><img alt="Reenvío de puertos en SO" class="align-center" src="../_images/proxytransparente.png" style="width: 300px;" /></a>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>La configuración de un proxy transparente presenta algunos problemas cuando hablamos de acceso HTTPS. En la web puedes encontrar bastante información al respecto.</p>
</div>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">echo 1 &gt; /proc/sys/net/ipv4/ip_forward //No necesita reinicio</span>
<span class="gp">#</span>iptables<span class="w"> </span>-A<span class="w"> </span>FORWARD<span class="w"> </span>-j<span class="w"> </span>ACCEPT
<span class="gp">#</span>iptables<span class="w"> </span>-t<span class="w"> </span>nat<span class="w"> </span>-A<span class="w"> </span>POSTROUTING<span class="w"> </span>-s<span class="w"> </span><span class="m">192</span>.168.100.0/24<span class="w"> </span>-o<span class="w"> </span>eth0<span class="w"> </span>-j<span class="w"> </span>MASQUERADE
<span class="gp">#</span>iptables<span class="w"> </span>-t<span class="w"> </span>nat<span class="w"> </span>-A<span class="w"> </span>PREROUTING<span class="w"> </span>-s<span class="w"> </span><span class="m">192</span>.168.100.0/24<span class="w"> </span>-p<span class="w"> </span>tcp<span class="w"> </span>--dport<span class="w"> </span><span class="m">80</span><span class="w"> </span>-j<span class="w"> </span>REDIRECT<span class="w"> </span>--to-port<span class="w"> </span><span class="m">3128</span>
<span class="gp">#</span>iptables<span class="w"> </span>-t<span class="w"> </span>nat<span class="w"> </span>-A<span class="w"> </span>PREROUTING<span class="w"> </span>-s<span class="w"> </span><span class="m">192</span>.168.100.0/24<span class="w"> </span>-p<span class="w"> </span>tcp<span class="w"> </span>--dport<span class="w"> </span><span class="m">443</span><span class="w"> </span>-j<span class="w"> </span>REDIRECT<span class="w"> </span>--to-port<span class="w"> </span><span class="m">3128</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Importante</p>
<ul class="simple">
<li><p><strong>192.168.100.0/24</strong> es la red local de mi servidor.</p></li>
<li><p><strong>eth0</strong> es la tarjeta externa del servidor</p></li>
<li><p><strong>3128</strong> es el puerto por defecto de Squid</p></li>
</ul>
</div>
</br>
<div class="footnotes">
    <hr />
    <ol>
        <li class="footnote" id="fn:note1">
            <p>
                <b>Recuerda:</b> Haz antes de nada una copia de seguridad de tu squid.conf para evitar problemas.
            </p>
    </ol>
</div></section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="puertos.html"
       title="página anterior">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">anterior</p>
        <p class="prev-next-title"><span class="section-number">5.2. </span>Apertura de puertos</p>
      </div>
    </a>
    <a class="right-next"
       href="../Tema_5_Web/Index.html"
       title="siguiente página">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">siguiente</p>
        <p class="prev-next-title"><span class="section-number">6. </span>Servicio WEB. HTTP(S)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contenido
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#squid">5.3.1. Squid</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#proxy-transparente">5.3.2. Proxy transparente</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Por M. Tomás Giménez Albert
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023, M. Tomás Giménez Albert.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>